<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Asynchronous Topics</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        
        :root {
            --dark-blue: #0a1931;
            --navy-blue: #185adb;
            --light-blue: #a8d0e6;
            --pale-green: #e0f0e6;
            --light-green: #7fcd91;
            --cream: #f8f9fa;
            --dark-text: #2d3436;
            --light-text: #dfe6e9;
            --card-bg: rgba(255, 255, 255, 0.1);
            --header-bg: rgba(0, 0, 0, 0.3);
            --search-bg: rgba(255, 255, 255, 0.9);
        }
        
        body {
            background: linear-gradient(135deg, var(--dark-blue) 0%, var(--navy-blue) 100%);
            background-attachment: fixed;
            color: var(--light-text);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        body.light-theme {
            --dark-blue: #7fcd91;
            --navy-blue: #a8d0e6;
            --light-blue: #e0f0e6;
            --pale-green: #f5fcf7;
            --light-green: #3a8c5f;
            --cream: #f8f9fa;
            --dark-text: #2d3436;
            --light-text: #2d3436;
            --card-bg: rgba(255, 255, 255, 0.9);
            --header-bg: rgba(255, 255, 255, 0.8);
            --search-bg: rgba(255, 255, 255, 0.95);
            
            background: linear-gradient(135deg, var(--pale-green) 0%, var(--light-blue) 100%);
            color: var(--dark-text);
        }
        
        .container {
            display: flex;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
            flex: 1;
        }
        
        .left-panel {
            flex: 1;
            max-width: 400px;
        }
        
        .right-panel {
            flex: 2;
            background: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            min-height: 600px;
            overflow-y: auto;
        }
        
        .light-theme .right-panel {
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        header {
            text-align: center;
            padding: 30px;
            background: var(--header-bg);
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            color: inherit;
        }
        
        .subtitle {
            font-size: 1.3rem;
            color: var(--light-blue);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .light-theme .subtitle {
            color: var(--light-green);
        }
        
        .categories {
            margin-bottom: 40px;
        }
        
        .category {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .light-theme .category {
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .category h2 {
            color: var(--light-blue);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-blue);
        }
        
        .light-theme .category h2 {
            color: var(--light-green);
            border-bottom: 2px solid var(--light-green);
        }
        
        .topics-list {
            list-style: none;
        }
        
        .topics-list li {
            padding: 12px 15px;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .topics-list li:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .light-theme .topics-list li {
            border-bottom: 1px dashed rgba(0, 0, 0, 0.1);
        }
        
        .light-theme .topics-list li:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        .topics-list li:before {
            content: "â€¢";
            color: var(--light-blue);
            font-weight: bold;
            display: inline-block;
            width: 20px;
            font-size: 20px;
        }
        
        .light-theme .topics-list li:before {
            color: var(--light-green);
        }
        
        .topics-list li.completed {
            text-decoration: line-through;
            opacity: 0.7;
        }
        
        .search-box {
            margin: 30px auto;
            position: relative;
        }
        
        .search-box input {
            width: 100%;
            padding: 15px 20px;
            border-radius: 50px;
            border: none;
            background: var(--search-bg);
            font-size: 1.1rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            color: var(--dark-text);
        }
        
        .search-box i {
            position: absolute;
            right: 20px;
            top: 15px;
            color: var(--navy-blue);
            font-size: 1.2rem;
        }
        
        .light-theme .search-box i {
            color: var(--light-green);
        }
        
        .highlight {
            background-color: yellow;
            color: black;
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0 30px;
        }
        
        .nav-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px 20px;
            background: var(--navy-blue);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            text-decoration: none;
        }
        
        .light-theme .nav-btn {
            background: var(--light-green);
            color: white;
        }
        
        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
        }
        
        .nav-btn:active {
            transform: translateY(0);
        }
        
        .nav-btn i {
            margin: 0 8px;
        }
        
        .prev-btn i {
            margin-right: 10px;
        }
        
        .next-btn i {
            margin-left: 10px;
        }
        
        .theme-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            background: var(--navy-blue);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .light-theme .theme-toggle {
            background: var(--light-green);
            color: white;
        }
        
        .theme-toggle:hover {
            transform: rotate(15deg);
        }
        
        .topic-content {
            display: none;
        }
        
        .topic-content.active {
            display: block;
        }
        
        .topic-title {
            font-size: 2rem;
            color: var(--light-blue);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-blue);
        }
        
        .light-theme .topic-title {
            color: var(--light-green);
            border-bottom: 2px solid var(--light-green);
        }
        
        .explanation {
            margin-bottom: 25px;
            line-height: 1.8;
        }
        
        .code-container {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            overflow-x: auto;
        }
        
        .light-theme .code-container {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid #ddd;
        }
        
        pre {
            color: #f8f8f2;
            margin: 0;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
        }
        
        .light-theme pre {
            color: #333;
        }
        
        .run-btn {
            padding: 10px 20px;
            background: var(--navy-blue);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            margin-bottom: 20px;
            display: inline-block;
        }
        
        .light-theme .run-btn {
            background: var(--light-green);
        }
        
        .run-btn:hover {
            opacity: 0.9;
        }
        
        .output {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            min-height: 100px;
        }
        
        .light-theme .output {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid #ddd;
        }
        
        .output-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--light-blue);
        }
        
        .light-theme .output-title {
            color: var(--light-green);
        }
        
        #output-content {
            white-space: pre-wrap;
            font-family: 'Fira Code', monospace;
        }
        
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            color: var(--light-blue);
        }
        
        .light-theme .empty-state {
            color: var(--light-green);
        }
        
        .empty-state i {
            font-size: 4rem;
            margin-bottom: 20px;
        }
        
        .empty-state p {
            font-size: 1.2rem;
            max-width: 300px;
        }
        
        @media (max-width: 900px) {
            .container {
                flex-direction: column;
            }
            
            .left-panel {
                max-width: 100%;
            }
            
            .right-panel {
                min-height: 400px;
            }
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .subtitle {
                font-size: 1.1rem;
            }
            
            .nav-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-btn {
                width: 100%;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>JavaScript Asynchronous Topics</h1>
        <p class="subtitle">Master asynchronous programming in JavaScript with these essential concepts</p>
        
        <div class="nav-container">
            <a href="page4.html" class="nav-btn prev-btn">
                <i class="fas fa-arrow-left"></i> Previous
            </a>
            
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
            
            <a href="page6.html" class="nav-btn next-btn">
                Next <i class="fas fa-arrow-right"></i>
            </a>
        </div>
        
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Search for JavaScript topics...">
            <i class="fas fa-search"></i>
        </div>
    </header>

    <div class="container">
        <div class="left-panel">
            <div class="categories">
                <div class="category">
                    <h2>Asynchronous JavaScript</h2>
                    <ul class="topics-list">
                        <li ondblclick="showTopic('callbacks')">Callbacks</li>
                        <li ondblclick="showTopic('promises')">Promises</li>
                        <li ondblclick="showTopic('async-await')">Async/Await</li>
                        <li ondblclick="showTopic('event-loop')">Event Loop</li>
                        <li ondblclick="showTopic('micro-macro')">Microtasks & Macrotasks</li>
                        <li ondblclick="showTopic('fetch-api')">Fetch API</li>
                        <li ondblclick="showTopic('ajax')">AJAX (XMLHttpRequest)</li>
                        <li ondblclick="showTopic('web-workers')">Web Workers</li>
                        <li ondblclick="showTopic('service-workers')">Service Workers</li>
                        <li ondblclick="showTopic('web-sockets')">Web Sockets</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="right-panel" id="right-panel">
            <div class="empty-state">
                <i class="fas fa-lightbulb"></i>
                <p>Double-click on any topic to view its details and code examples</p>
            </div>
            
            <div class="topic-content" id="callbacks">
                <h2 class="topic-title">Callbacks</h2>
                <div class="explanation">
                    <p>Callbacks are functions passed as arguments to other functions and are executed after the completion of that function. They are a fundamental concept in JavaScript for handling asynchronous operations.</p>
                    <p>Callbacks allow you to continue code execution after an asynchronous operation completes, preventing blocking of the main thread.</p>
                </div>
                
                <h3>Example Code:</h3>
                <div class="code-container">
                    <pre><code>// Simulating an asynchronous operation with setTimeout
function fetchData(callback) {
    console.log("Fetching data...");
    setTimeout(() => {
        const data = { name: "John Doe", age: 30 };
        callback(null, data); // First parameter is for error, second for data
    }, 2000);
}

// Using the callback
fetchData((error, data) => {
    if (error) {
        console.error("Error:", error);
    } else {
        console.log("Data received:", data);
    }
});

console.log("This runs immediately after calling fetchData()");</code></pre>
                </div>
                
                <button class="run-btn" onclick="runCode('callbacks')">Run Code</button>
                
                <div class="output">
                    <div class="output-title">Output:</div>
                    <div id="output-callbacks"></div>
                </div>
            </div>
            
            <div class="topic-content" id="promises">
                <h2 class="topic-title">Promises</h2>
                <div class="explanation">
                    <p>Promises represent the eventual completion (or failure) of an asynchronous operation and its resulting value. They provide a cleaner alternative to callbacks for handling asynchronous code.</p>
                    <p>A Promise is in one of these states:</p>
                    <ul>
                        <li><strong>Pending</strong>: Initial state, neither fulfilled nor rejected</li>
                        <li><strong>Fulfilled</strong>: The operation completed successfully</li>
                        <li><strong>Rejected</strong>: The operation failed</li>
                    </ul>
                </div>
                
                <h3>Example Code:</h3>
                <div class="code-container">
                    <pre><code>// Creating a Promise
const fetchData = new Promise((resolve, reject) {
    console.log("Fetching data...");
    setTimeout(() => {
        const success = Math.random() > 0.3; // 70% chance of success
        
        if (success) {
            const data = { name: "Jane Smith", age: 28 };
            resolve(data); // Promise is fulfilled
        } else {
            reject("Failed to fetch data"); // Promise is rejected
        }
    }, 2000);
});

// Using the Promise
fetchData
    .then(data => {
        console.log("Data received:", data);
    })
    .catch(error => {
        console.error("Error:", error);
    })
    .finally(() => {
        console.log("Operation completed (success or failure)");
    });

console.log("This runs immediately after calling fetchData");</code></pre>
                </div>
                
                <button class="run-btn" onclick="runCode('promises')">Run Code</button>
                
                <div class="output">
                    <div class="output-title">Output:</div>
                    <div id="output-promises"></div>
                </div>
            </div>
            
            <div class="topic-content" id="async-await">
                <h2 class="topic-title">Async/Await</h2>
                <div class="explanation">
                    <p>Async/await is a modern syntax for working with promises that makes asynchronous code look and behave more like synchronous code. It's built on top of Promises.</p>
                    <p>The <code>async</code> keyword is used to declare an asynchronous function, which returns a Promise. The <code>await</code> keyword can only be used inside async functions and makes JavaScript wait until the Promise settles.</p>
                </div>
                
                <h3>Example Code:</h3>
                <div class="code-container">
                    <pre><code>// Simulating an API call with a Promise
function apiCall() {
    return new Promise((resolve, reject) => {
        setTimeout(() => {
            const success = Math.random() > 0.3;
            if (success) {
                resolve({ data: { user: "Alice", id: 1 } });
            } else {
                reject("API Error: Could not fetch data");
            }
        }, 2000);
    });
}

// Using async/await
async function fetchUser() {
    try {
        console.log("Fetching user data...");
        const response = await apiCall(); // Execution pauses here until the Promise is resolved
        console.log("User data received:", response.data);
        return response.data;
    } catch (error) {
        console.error("Error fetching user:", error);
        throw error;
    }
}

// Calling the async function
fetchUser()
    .then(user => {
        console.log("User fetched successfully:", user);
    })
    .catch(error => {
        console.error("Failed to fetch user:", error);
    });

console.log("This runs immediately after calling fetchUser()");</code></pre>
                </div>
                
                <button class="run-btn" onclick="runCode('async-await')">Run Code</button>
                
                <div class="output">
                    <div class="output-title">Output:</div>
                    <div id="output-async-await"></div>
                </div>
            </div>
            
            <div class="topic-content" id="event-loop">
                <h2 class="topic-title">Event Loop</h2>
                <div class="explanation">
                    <p>The Event Loop is a fundamental concept in JavaScript that enables asynchronous operations. It's responsible for executing code, collecting and processing events, and executing queued sub-tasks.</p>
                    <p>JavaScript has a runtime model based on an event loop, which executes the code, collects and processing events, and executes queued sub-tasks. This model is quite different from models in other languages like C or Java.</p>
                </div>
                
                <h3>Example Code:</h3>
                <div class="code-container">
                    <pre><code>console.log("Start");

setTimeout(() => {
    console.log("Timeout callback");
}, 0);

Promise.resolve().then(() => {
    console.log("Promise resolved");
});

console.log("End");

// The order of execution demonstrates the event loop:
// 1. "Start" and "End" are logged first (synchronous code)
// 2. The promise microtask runs before the setTimeout macrotask
// 3. Finally the timeout callback runs</code></pre>
                </div>
                
                <button class="run-btn" onclick="runCode('event-loop')">Run Code</button>
                
                <div class="output">
                    <div class="output-title">Output:</div>
                    <div id="output-event-loop"></div>
                </div>
            </div>
            
            <div class="topic-content" id="micro-macro">
                <h2 class="topic-title">Microtasks & Macrotasks</h2>
                <div class="explanation">
                    <p>In JavaScript's event loop, tasks are divided into microtasks and macrotasks. This distinction is important for understanding the order of execution of asynchronous code.</p>
                    <p><strong>Macrotasks</strong>: setTimeout, setInterval, setImmediate, I/O operations, UI rendering</p>
                    <p><strong>Microtasks</strong>: Promise callbacks, process.nextTick, MutationObserver</p>
                    <p>The event loop processes all microtasks in the queue before moving on to the next macrotask.</p>
                </div>
                
                <h3>Example Code:</h3>
                <div class="code-container">
                    <pre><code>console.log("Script start");

setTimeout(() => {
    console.log("setTimeout (macrotask)");
}, 0);

Promise.resolve()
    .then(() => {
        console.log("Promise 1 (microtask)");
    })
    .then(() => {
        console.log("Promise 2 (microtask)");
    });

console.log("Script end");

// Expected order:
// 1. "Script start", "Script end" (synchronous execution)
// 2. "Promise 1", "Promise 2" (all microtasks execute before next macrotask)
// 3. "setTimeout" (macrotask)</code></pre>
                </div>
                
                <button class="run-btn" onclick="runCode('micro-macro')">Run Code</button>
                
                <div class="output">
                    <div class="output-title">Output:</div>
                    <div id="output-micro-macro"></div>
                </div>
            </div>
            
            <div class="topic-content" id="fetch-api">
                <h2 class="topic-title">Fetch API</h2>
                <div class="explanation">
                    <p>The Fetch API provides a modern interface for fetching resources across the network. It is a more powerful and flexible replacement for XMLHttpRequest.</p>
                    <p>The fetch() method takes one mandatory argument (the path to the resource) and returns a Promise that resolves to the Response object representing the response to the request.</p>
                </div>
                
                <h3>Example Code:</h3>
                <div class="code-container">
                    <pre><code>// Using the Fetch API to get data from a JSON placeholder API
fetch('https://jsonplaceholder.typicode.com/posts/1')
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json();
    })
    .then(data => {
        console.log('Data received:', data);
    })
    .catch(error => {
        console.error('There was a problem with the fetch operation:', error);
    });

// Using async/await with fetch
async function fetchPost() {
    try {
        const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        const data = await response.json();
        console.log('Data received:', data);
        return data;
    } catch (error) {
        console.error('Error fetching data:', error);
    }
}</code></pre>
                </div>
                
                <button class="run-btn" onclick="runCode('fetch-api')">Run Code</button>
                
                <div class="output">
                    <div class="output-title">Output:</div>
                    <div id="output-fetch-api"></div>
                </div>
            </div>
            
            <div class="topic-content" id="ajax">
                <h2 class="topic-title">AJAX (XMLHttpRequest)</h2>
                <div class="explanation">
                    <p>AJAX (Asynchronous JavaScript and XML) allows web pages to be updated asynchronously by exchanging data with a web server behind the scenes. The XMLHttpRequest object is used to interact with servers.</p>
                    <p>Although the Fetch API is more modern and powerful, understanding XMLHttpRequest is still important for working with legacy code.</p>
                </div>
                
                <h3>Example Code:</h3>
                <div class="code-container">
                    <pre><code>// Creating an XMLHttpRequest
const xhr = new XMLHttpRequest();

// Configure the request
xhr.open('GET', 'https://jsonplaceholder.typicode.com/posts/1', true);

// Set up event handlers
xhr.onload = function() {
    if (xhr.status >= 200 && xhr.status < 300) {
        // Parse the response
        const data = JSON.parse(xhr.responseText);
        console.log('Data received:', data);
    } else {
        console.error('Request failed with status:', xhr.status);
    }
};

xhr.onerror = function() {
    console.error('Request failed');
};

// Send the request
xhr.send();

console.log('Request sent. Waiting for response...');</code></pre>
                </div>
                
                <button class="run-btn" onclick="runCode('ajax')">Run Code</button>
                
                <div class="output">
                    <div class="output-title">Output:</div>
                    <div id="output-ajax"></div>
                </div>
            </div>
            
            <div class="topic-content" id="web-workers">
                <h2 class="topic-title">Web Workers</h2>
                <div class="explanation">
                    <p>Web Workers allow you to run JavaScript in background threads, separate from the main execution thread. This enables you to perform processor-intensive operations without blocking the user interface.</p>
                    <p>Workers run in a different global context than the current window, so you can't directly manipulate the DOM from inside a worker.</p>
                </div>
                
                <h3>Example Code:</h3>
                <div class="code-container">
                    <pre><code>// Main script - creating a web worker
// Note: In a real scenario, you would have a separate worker.js file

// This is a simulation since we can't create actual workers in this environment

// Simulating worker code
function simulateWorker() {
    console.log('Worker: Worker started');
    
    // Simulate intensive computation
    let result = 0;
    for (let i = 0; i < 1000000000; i++) {
        result += Math.sqrt(i);
    }
    
    console.log('Worker: Calculation completed');
    return result;
}

// Simulating main thread interaction with worker
console.log('Main: Starting worker...');

// In a real scenario, we would use:
// const worker = new Worker('worker.js');
// worker.postMessage('start');
// worker.onmessage = function(e) { console.log('Main: Received:', e.data); }

// For simulation purposes, we'll run the function with a timeout
setTimeout(() => {
    const result = simulateWorker();
    console.log('Main: Received result from worker:', result);
}, 100);

console.log('Main: Worker started, continuing with other tasks...');</code></pre>
                </div>
                
                <button class="run-btn" onclick="runCode('web-workers')">Run Code</button>
                
                <div class="output">
                    <div class="output-title">Output:</div>
                    <div id="output-web-workers"></div>
                </div>
            </div>
            
            <div class="topic-content" id="service-workers">
                <h2 class="topic-title">Service Workers</h2>
                <div class="explanation">
                    <p>Service Workers are a type of web worker that act as a proxy between web applications, the browser, and the network. They enable features like background sync, push notifications, and offline experiences.</p>
                    <p>Service Workers can intercept and handle network requests, allowing for sophisticated caching strategies.</p>
                </div>
                
                <h3>Example Code:</h3>
                <div class="code-container">
                    <pre><code>// Service Worker registration (typically in your main JavaScript file)
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js')
        .then(registration => {
            console.log('Service Worker registered with scope:', registration.scope);
        })
        .catch(error => {
            console.log('Service Worker registration failed:', error);
        });
}

// Example service worker code (in sw.js)
/*
self.addEventListener('install', event => {
    console.log('Service Worker: Installed');
    // Pre-cache resources
    event.waitUntil(
        caches.open('v1').then(cache => {
            return cache.addAll([
                '/',
                '/styles/main.css',
                '/script/main.js'
            ]);
        })
    );
});

self.addEventListener('fetch', event => {
    event.respondWith(
        caches.match(event.request).then(response => {
            // Return cached version or fetch from network
            return response || fetch(event.request);
        })
    );
});
*/

// For demonstration, we'll simulate service worker behavior
console.log('Simulating Service Worker registration...');
setTimeout(() => {
    console.log('Service Worker would now be registered and controlling page');
    console.log('It would handle fetch events and enable offline functionality');
}, 1000);</code></pre>
                </div>
                
                <button class="run-btn" onclick="runCode('service-workers')">Run Code</button>
                
                <div class="output">
                    <div class="output-title">Output:</div>
                    <div id="output-service-workers"></div>
                </div>
            </div>
            
            <div class="topic-content" id="web-sockets">
                <h2 class="topic-title">Web Sockets</h2>
                <div class="explanation">
                    <p>WebSockets provide a persistent, bidirectional communication channel between a client and server over a single TCP connection. This is ideal for real-time applications like chat, live feeds, or multiplayer games.</p>
                    <p>Unlike HTTP, which follows a request-response model, WebSockets allow servers to push data to clients without being explicitly requested.</p>
                </div>
                
                <h3>Example Code:</h3>
                <div class="code-container">
                    <pre><code>// Creating a WebSocket connection
// Note: In a real scenario, you would connect to an actual WebSocket server

// Simulating WebSocket behavior since we can't create actual connections here
function simulateWebSocket() {
    console.log('Connecting to WebSocket server...');
    
    // Simulate connection establishment
    setTimeout(() => {
        console.log('WebSocket connection established');
        
        // Simulate receiving messages
        const messages = [
            'Hello from server!',
            'This is a real-time update',
            'Another message from the server'
        ];
        
        let i = 0;
        const interval = setInterval(() => {
            if (i < messages.length) {
                console.log('Received message:', messages[i]);
                i++;
            } else {
                clearInterval(interval);
                console.log('Closing WebSocket connection...');
            }
        }, 1000);
    }, 500);
}

// Simulate sending a message
function sendMessage(message) {
    console.log('Sending message:', message);
}

// Start the simulation
simulateWebSocket();

// After a delay, simulate sending a message
setTimeout(() => {
    sendMessage('Hello from client!');
}, 2000);</code></pre>
                </div>
                
                <button class="run-btn" onclick="runCode('web-sockets')">Run Code</button>
                
                <div class="output">
                    <div class="output-title">Output:</div>
                    <div id="output-web-sockets"></div>
                </div>
            </div>
            
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const topics = document.querySelectorAll('.topics-list li');
            const searchInput = document.getElementById('searchInput');
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = themeToggle.querySelector('i');
            const rightPanel = document.getElementById('right-panel');
            
            // Theme switching functionality
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('light-theme');
                
                if (document.body.classList.contains('light-theme')) {
                    themeIcon.classList.remove('fa-moon');
                    themeIcon.classList.add('fa-sun');
                } else {
                    themeIcon.classList.remove('fa-sun');
                    themeIcon.classList.add('fa-moon');
                }
                
                // Save theme preference to localStorage
                const isLightTheme = document.body.classList.contains('light-theme');
                localStorage.setItem('lightTheme', isLightTheme);
            });
            
            // Check for saved theme preference
            if (localStorage.getItem('lightTheme') === 'true') {
                document.body.classList.add('light-theme');
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            }
            
            // Topic completion functionality
            topics.forEach(topic => {
                topic.addEventListener('click', function() {
                    this.classList.toggle('completed');
                    
                    // Save completed status to localStorage
                    const topicText = this.textContent;
                    const completedTopics = JSON.parse(localStorage.getItem('completedTopics') || '{}');
                    
                    if (this.classList.contains('completed')) {
                        completedTopics[topicText] = true;
                    } else {
                        delete completedTopics[topicText];
                    }
                    
                    localStorage.setItem('completedTopics', JSON.stringify(completedTopics));
                });
                
                // Load completed status from localStorage
                const topicText = topic.textContent;
                const completedTopics = JSON.parse(localStorage.getItem('completedTopics') || '{}');
                
                if (completedTopics[topicText]) {
                    topic.classList.add('completed');
                }
            });
            
            // Search functionality
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                
                topics.forEach(topic => {
                    const topicText = topic.textContent.toLowerCase();
                    
                    if (searchTerm === '') {
                        topic.innerHTML = topicText;
                        return;
                    }
                    
                    if (topicText.includes(searchTerm)) {
                        const regex = new RegExp(searchTerm, 'gi');
                        const highlightedText = topicText.replace(regex, match => 
                            `<span class="highlight">${match}</span>`
                        );
                        topic.innerHTML = highlightedText;
                    } else {
                        topic.style.display = 'none';
                    }
                });
            });
            
            // Clear search when clicking the X button
            searchInput.nextElementSibling.addEventListener('click', function() {
                searchInput.value = '';
                topics.forEach(topic => {
                    topic.innerHTML = topic.textContent;
                    topic.style.display = 'flex';
                });
            });
        });
        
        // Function to show a topic
        function showTopic(topicId) {
            // Hide all topic contents
            const topicContents = document.querySelectorAll('.topic-content');
            topicContents.forEach(content => {
                content.classList.remove('active');
            });
            
            // Show the selected topic
            const selectedTopic = document.getElementById(topicId);
            if (selectedTopic) {
                selectedTopic.classList.add('active');
                
                // Hide the empty state
                document.querySelector('.empty-state').style.display = 'none';
            }
        }
        
        // Function to run code examples
        function runCode(topicId) {
            const outputElement = document.getElementById(`output-${topicId}`);
            outputElement.innerHTML = 'Running code...';
            
            // Simulate code execution with a delay
            setTimeout(() => {
                switch(topicId) {
                    case 'callbacks':
                        outputElement.innerHTML = `Fetching data...\nThis runs immediately after calling fetchData()\n(After 2 seconds) Data received: { "name": "John Doe", "age": 30 }`;
                        break;
                    case 'promises':
                        const success = Math.random() > 0.3;
                        if (success) {
                            outputElement.innerHTML = `Fetching data...\nThis runs immediately after calling fetchData\n(After 2 seconds) Data received: { "name": "Jane Smith", "age": 28 }\nOperation completed (success or failure)`;
                        } else {
                            outputElement.innerHTML = `Fetching data...\nThis runs immediately after calling fetchData\n(After 2 seconds) Error: Failed to fetch data\nOperation completed (success or failure)`;
                        }
                        break;
                    case 'async-await':
                        const apiSuccess = Math.random() > 0.3;
                        if (apiSuccess) {
                            outputElement.innerHTML = `Fetching user data...\nThis runs immediately after calling fetchUser()\n(After 2 seconds) User data received: { "user": "Alice", "id": 1 }\nUser fetched successfully: { "user": "Alice", "id": 1 }`;
                        } else {
                            outputElement.innerHTML = `Fetching user data...\nThis runs immediately after calling fetchUser()\n(After 2 seconds) Error fetching user: API Error: Could not fetch data\nFailed to fetch user: API Error: Could not fetch data`;
                        }
                        break;
                    case 'event-loop':
                        outputElement.innerHTML = `Start\nEnd\nPromise resolved\nTimeout callback`;
                        break;
                    case 'micro-macro':
                        outputElement.innerHTML = `Script start\nScript end\nPromise 1 (microtask)\nPromise 2 (microtask)\nsetTimeout (macrotask)`;
                        break;
                    case 'fetch-api':
                        outputElement.innerHTML = `Simulating fetch request to JSONPlaceholder API...\n(After a short delay) Data received: { "userId": 1, "id": 1, "title": "sunt aut facere repellat provident occaecati excepturi optio reprehenderit", "body": "quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto" }`;
                        break;
                    case 'ajax':
                        outputElement.innerHTML = `Request sent. Waiting for response...\n(After a short delay) Data received: { "userId": 1, "id": 1, "title": "sunt aut facere repellat provident occaecati excepturi optio reprehenderit", "body": "quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto" }`;
                        break;
                    case 'web-workers':
                        outputElement.innerHTML = `Main: Starting worker...\nMain: Worker started, continuing with other tasks...\nWorker: Worker started\nWorker: Calculation completed\nMain: Received result from worker: 2108185107.7745717`;
                        break;
                    case 'service-workers':
                        outputElement.innerHTML = `Simulating Service Worker registration...\n(After 1 second) Service Worker would now be registered and controlling page\nIt would handle fetch events and enable offline functionality`;
                        break;
                    case 'web-sockets':
                        outputElement.innerHTML = `Connecting to WebSocket server...\n(After 0.5 seconds) WebSocket connection established\n(After 1.5 seconds) Received message: Hello from server!\n(After 2.5 seconds) Received message: This is a real-time update\n(After 3.5 seconds) Received message: Another message from the server\n(After 4.5 seconds) Closing WebSocket connection...\n(After 2 seconds) Sending message: Hello from client!`;
                        break;
                }
            }, 500);
        }
    </script>
</body>
</html>